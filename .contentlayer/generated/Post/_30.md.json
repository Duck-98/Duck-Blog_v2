{
  "title": "React는 왜 불변성을 지켜야할까?",
  "date": "2023-05-25",
  "description": "불변성에 관한 글",
  "tag": "JS",
  "body": {
    "raw": "\n### React는 왜 불변성을 지켜야 하는지를 알아보기 전에 다시 한번 불변성에 대한 개념을 보고 가자!\n\n## 불변성\n\n저번 불변값 가변값 글에서 불변성은 변하지 않는 바뀔 수 없는 값이라는 것을 알았다.\n\n이 값은 메모리 영역 안에서 변경이 불가능하며 변수에 할당할 때 새로운 값이 만들어진다.\n<br />\n\n<span className=\"blue\"> **그렇다면 우리는 왜 불변성을 지켜야 할까?** </span>\n\n---\n\n### 불변성을 지켜야하는 이유\n\n- 값의 변화를 추적하기 쉬움\n- 원본데이터가 변경되면, 해당 데이터를 참조하고 있는 다른 객체에서 예상치 못한 오류가 발생함\n\n### 불변성을 지키는 방법\n\n### 1. **object 메서드 사용**\n\n#### Object.assign()을 사용하여 데이터를 복사\n\n예시코드\n\n```js\nconst target = { a: 1, b: 2 };\nconst source = { b: 4, c: 5 };\nconst answer = Object.assign(target, source);\nconsole.log(answer); // Object { a: 1, b: 4, c: 5 }\n```\n\n<br/>\n\n#### Object.freeze()을 사용하여 원시값을 얼림\n\n```js\nconst obj = {\n  prop: 1,\n};\n\nObject.freeze(obj);\n\nobj.prop = 3;\n// Throws an error in strict mode\n\nconsole.log(obj.prop);\n//  1\n```\n\n<br/>\n\n#### Object.seal()를 이용하여 객체를 밀봉함\n\n#### 밀봉하게 되면 객체에 새로운 속성을 추가할 수 없고 삭제할수도 없음.\n\n```js\nconst object1 = {\n  property1: 42,\n};\n\nObject.seal(object1);\nobject1.property1 = 33;\nconsole.log(object1.property1);\n// Expected output: 33\n\ndelete object1.property1; // Cannot delete when sealed\nconsole.log(object1.property1);\n// Expected output: 33\n```\n\n<br/>\n\n### 2. 스프레드 문법\n\n- 스프레드 문법을 이용하여 불변성을 유지할 수 있음\n- 하지만 객체의 깊이가 깊어지면 불변성을 유지하기가 힘들다.\n- **why?** 만약 중첩된 객체가 있다면 중첩된 모든 객체에 개별적으로 스프레드 연산자를 적용해줘야 하기 때문이다.\n\n<br/>\n\n```js\nconst ex = {\n  name: 'duck',\n  age: 26,\n};\nconst new_ex = { ...ex };\nex.name = 'dev';\nconsole.log(ex.name, new_ex.name); // 'dev' 'duck'\n```\n\n### 3. immer/immutable 라이브러리 사용\n\n### 4. map, filter, slice, reduce와 같은 새로운 배열을 반환하는 메서드를 사용\n\n---\n\n### 그렇다면 왜 REACT에서 불변성을 지켜야하는가?\n\nReact는 상태값을 업데이트 할 때 얕은 비교를 수행한다.\n\n만약 불변성을 지키지 않고 객체나 배열을 직접 변경하게 된다면, Virtual Dom이 Props의 변화를 감지하지 못한다.\n\n#### React에서 불변성을 지키는 간단한 예시\n\n##### 불변성을 지키지 못한 코드\n\n```js\nconst [person, setPerson] = useState({\n  name: 'duck',\n  age: 26,\n});\n\nreturn (\n  <div>\n    <span>{person.name}</span>\n    <span>{person.age}</span>\n    <button\n      onClick={() => {\n        person.age = 25;\n        setPerson(person);\n        console.log(person.age);\n        // 콘솔에는 25 찍히지만 같은 주소를 참조해 리렌더링은 일어나지 않는다.\n      }}\n    >\n      25살로 젊어지게 하는 버튼\n    </button>\n  </div>\n);\n```\n\n<br/>\n\n##### 불변성을 지킨 코드\n\n```js\nconst [person, setPerson] = useState({\n  name: 'duck',\n  age: 26,\n});\n\nreturn (\n  <div>\n    <span>{person.name}</span>\n    <span>{person.age}</span>\n    <button\n      onClick={() => {\n        setPerson((prev) => {\n          return { ...prev, age: 25 };\n          // 스프레드 연산자를 이용하여 불변성 유지\n        });\n      }}\n    >\n      25살로 젊어지게 하는 버튼\n    </button>\n  </div>\n);\n```\n\n---\n\n### 리덕스를 사용해본 사람들은 알겠지만,\n\n### 리덕스를 이용하여 상태관리를 할 때도 불변성을 지켜야한다.\n\n##### 리덕스에서 불변성을 지킨 코드\n\n```js\nconst initialState = {\n   name:'duck',\n   job:'front-dev',\n   age:null;\n}\n\nconst reducer = (state=initialState, action) =>{\n switch (action.type) {\n    case TEST:\n      return {\n        ...state, // 스프레드 연산자를 이용한다.\n        age:action.data\n      };\n    default:\n      return state\n    }\n}\n```\n\n<br/>\n\n하지만 위에서 말한 것처럼 스프레드 연산자를 이용하여 불변성을 지킬 때,\n객체의 깊이가 복잡해지면 어렵기 때문에, immer 라이브러리를 이용하자..!\n",
    "code": "var Component=(()=>{var d=Object.create;var o=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var m=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports),j=(r,n)=>{for(var c in n)o(r,c,{get:n[c],enumerable:!0})},a=(r,n,c,s)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let t of u(n))!b.call(r,t)&&t!==c&&o(r,t,{get:()=>n[t],enumerable:!(s=p(n,t))||s.enumerable});return r};var x=(r,n,c)=>(c=r!=null?d(g(r)):{},a(n||!r||!r.__esModule?o(c,\"default\",{value:r,enumerable:!0}):c,r)),f=r=>a(o({},\"__esModule\",{value:!0}),r);var i=m((N,l)=>{l.exports=_jsx_runtime});var _={};j(_,{default:()=>O,frontmatter:()=>w});var e=x(i()),w={title:\"React\\uB294 \\uC65C \\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uCF1C\\uC57C\\uD560\\uAE4C?\",date:new Date(16849728e5),description:\"\\uBD88\\uBCC0\\uC131\\uC5D0 \\uAD00\\uD55C \\uAE00\",tag:\"JS\"};function h(r){let n=Object.assign({h3:\"h3\",h2:\"h2\",p:\"p\",strong:\"strong\",hr:\"hr\",ul:\"ul\",li:\"li\",h4:\"h4\",pre:\"pre\",code:\"code\",h5:\"h5\"},r.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h3,{children:\"React\\uB294 \\uC65C \\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uCF1C\\uC57C \\uD558\\uB294\\uC9C0\\uB97C \\uC54C\\uC544\\uBCF4\\uAE30 \\uC804\\uC5D0 \\uB2E4\\uC2DC \\uD55C\\uBC88 \\uBD88\\uBCC0\\uC131\\uC5D0 \\uB300\\uD55C \\uAC1C\\uB150\\uC744 \\uBCF4\\uACE0 \\uAC00\\uC790!\"}),`\n`,(0,e.jsx)(n.h2,{children:\"\\uBD88\\uBCC0\\uC131\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\uC800\\uBC88 \\uBD88\\uBCC0\\uAC12 \\uAC00\\uBCC0\\uAC12 \\uAE00\\uC5D0\\uC11C \\uBD88\\uBCC0\\uC131\\uC740 \\uBCC0\\uD558\\uC9C0 \\uC54A\\uB294 \\uBC14\\uB014 \\uC218 \\uC5C6\\uB294 \\uAC12\\uC774\\uB77C\\uB294 \\uAC83\\uC744 \\uC54C\\uC558\\uB2E4.\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\uC774 \\uAC12\\uC740 \\uBA54\\uBAA8\\uB9AC \\uC601\\uC5ED \\uC548\\uC5D0\\uC11C \\uBCC0\\uACBD\\uC774 \\uBD88\\uAC00\\uB2A5\\uD558\\uBA70 \\uBCC0\\uC218\\uC5D0 \\uD560\\uB2F9\\uD560 \\uB54C \\uC0C8\\uB85C\\uC6B4 \\uAC12\\uC774 \\uB9CC\\uB4E4\\uC5B4\\uC9C4\\uB2E4.\"}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsxs)(\"span\",{className:\"blue\",children:[\" \",(0,e.jsx)(n.strong,{children:\"\\uADF8\\uB807\\uB2E4\\uBA74 \\uC6B0\\uB9AC\\uB294 \\uC65C \\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uCF1C\\uC57C \\uD560\\uAE4C?\"}),\" \"]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.h3,{children:\"\\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uCF1C\\uC57C\\uD558\\uB294 \\uC774\\uC720\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\uAC12\\uC758 \\uBCC0\\uD654\\uB97C \\uCD94\\uC801\\uD558\\uAE30 \\uC26C\\uC6C0\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\uC6D0\\uBCF8\\uB370\\uC774\\uD130\\uAC00 \\uBCC0\\uACBD\\uB418\\uBA74, \\uD574\\uB2F9 \\uB370\\uC774\\uD130\\uB97C \\uCC38\\uC870\\uD558\\uACE0 \\uC788\\uB294 \\uB2E4\\uB978 \\uAC1D\\uCCB4\\uC5D0\\uC11C \\uC608\\uC0C1\\uCE58 \\uBABB\\uD55C \\uC624\\uB958\\uAC00 \\uBC1C\\uC0DD\\uD568\"}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{children:\"\\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uD0A4\\uB294 \\uBC29\\uBC95\"}),`\n`,(0,e.jsxs)(n.h3,{children:[\"1. \",(0,e.jsx)(n.strong,{children:\"object \\uBA54\\uC11C\\uB4DC \\uC0AC\\uC6A9\"})]}),`\n`,(0,e.jsx)(n.h4,{children:\"Object.assign()\\uC744 \\uC0AC\\uC6A9\\uD558\\uC5EC \\uB370\\uC774\\uD130\\uB97C \\uBCF5\\uC0AC\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\uC608\\uC2DC\\uCF54\\uB4DC\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`const target = { a: 1, b: 2 };\nconst source = { b: 4, c: 5 };\nconst answer = Object.assign(target, source);\nconsole.log(answer); // Object { a: 1, b: 4, c: 5 }\n`})}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.h4,{children:\"Object.freeze()\\uC744 \\uC0AC\\uC6A9\\uD558\\uC5EC \\uC6D0\\uC2DC\\uAC12\\uC744 \\uC5BC\\uB9BC\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`const obj = {\n  prop: 1,\n};\n\nObject.freeze(obj);\n\nobj.prop = 3;\n// Throws an error in strict mode\n\nconsole.log(obj.prop);\n//  1\n`})}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.h4,{children:\"Object.seal()\\uB97C \\uC774\\uC6A9\\uD558\\uC5EC \\uAC1D\\uCCB4\\uB97C \\uBC00\\uBD09\\uD568\"}),`\n`,(0,e.jsx)(n.h4,{children:\"\\uBC00\\uBD09\\uD558\\uAC8C \\uB418\\uBA74 \\uAC1D\\uCCB4\\uC5D0 \\uC0C8\\uB85C\\uC6B4 \\uC18D\\uC131\\uC744 \\uCD94\\uAC00\\uD560 \\uC218 \\uC5C6\\uACE0 \\uC0AD\\uC81C\\uD560\\uC218\\uB3C4 \\uC5C6\\uC74C.\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`const object1 = {\n  property1: 42,\n};\n\nObject.seal(object1);\nobject1.property1 = 33;\nconsole.log(object1.property1);\n// Expected output: 33\n\ndelete object1.property1; // Cannot delete when sealed\nconsole.log(object1.property1);\n// Expected output: 33\n`})}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.h3,{children:\"2. \\uC2A4\\uD504\\uB808\\uB4DC \\uBB38\\uBC95\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\uC2A4\\uD504\\uB808\\uB4DC \\uBB38\\uBC95\\uC744 \\uC774\\uC6A9\\uD558\\uC5EC \\uBD88\\uBCC0\\uC131\\uC744 \\uC720\\uC9C0\\uD560 \\uC218 \\uC788\\uC74C\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\uD558\\uC9C0\\uB9CC \\uAC1D\\uCCB4\\uC758 \\uAE4A\\uC774\\uAC00 \\uAE4A\\uC5B4\\uC9C0\\uBA74 \\uBD88\\uBCC0\\uC131\\uC744 \\uC720\\uC9C0\\uD558\\uAE30\\uAC00 \\uD798\\uB4E4\\uB2E4.\"}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"why?\"}),\" \\uB9CC\\uC57D \\uC911\\uCCA9\\uB41C \\uAC1D\\uCCB4\\uAC00 \\uC788\\uB2E4\\uBA74 \\uC911\\uCCA9\\uB41C \\uBAA8\\uB4E0 \\uAC1D\\uCCB4\\uC5D0 \\uAC1C\\uBCC4\\uC801\\uC73C\\uB85C \\uC2A4\\uD504\\uB808\\uB4DC \\uC5F0\\uC0B0\\uC790\\uB97C \\uC801\\uC6A9\\uD574\\uC918\\uC57C \\uD558\\uAE30 \\uB54C\\uBB38\\uC774\\uB2E4.\"]}),`\n`]}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`const ex = {\n  name: 'duck',\n  age: 26,\n};\nconst new_ex = { ...ex };\nex.name = 'dev';\nconsole.log(ex.name, new_ex.name); // 'dev' 'duck'\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"3. immer/immutable \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC \\uC0AC\\uC6A9\"}),`\n`,(0,e.jsx)(n.h3,{children:\"4. map, filter, slice, reduce\\uC640 \\uAC19\\uC740 \\uC0C8\\uB85C\\uC6B4 \\uBC30\\uC5F4\\uC744 \\uBC18\\uD658\\uD558\\uB294 \\uBA54\\uC11C\\uB4DC\\uB97C \\uC0AC\\uC6A9\"}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.h3,{children:\"\\uADF8\\uB807\\uB2E4\\uBA74 \\uC65C REACT\\uC5D0\\uC11C \\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uCF1C\\uC57C\\uD558\\uB294\\uAC00?\"}),`\n`,(0,e.jsx)(n.p,{children:\"React\\uB294 \\uC0C1\\uD0DC\\uAC12\\uC744 \\uC5C5\\uB370\\uC774\\uD2B8 \\uD560 \\uB54C \\uC595\\uC740 \\uBE44\\uAD50\\uB97C \\uC218\\uD589\\uD55C\\uB2E4.\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\uB9CC\\uC57D \\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uD0A4\\uC9C0 \\uC54A\\uACE0 \\uAC1D\\uCCB4\\uB098 \\uBC30\\uC5F4\\uC744 \\uC9C1\\uC811 \\uBCC0\\uACBD\\uD558\\uAC8C \\uB41C\\uB2E4\\uBA74, Virtual Dom\\uC774 Props\\uC758 \\uBCC0\\uD654\\uB97C \\uAC10\\uC9C0\\uD558\\uC9C0 \\uBABB\\uD55C\\uB2E4.\"}),`\n`,(0,e.jsx)(n.h4,{children:\"React\\uC5D0\\uC11C \\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uD0A4\\uB294 \\uAC04\\uB2E8\\uD55C \\uC608\\uC2DC\"}),`\n`,(0,e.jsx)(n.h5,{children:\"\\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uD0A4\\uC9C0 \\uBABB\\uD55C \\uCF54\\uB4DC\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`const [person, setPerson] = useState({\n  name: 'duck',\n  age: 26,\n});\n\nreturn (\n  <div>\n    <span>{person.name}</span>\n    <span>{person.age}</span>\n    <button\n      onClick={() => {\n        person.age = 25;\n        setPerson(person);\n        console.log(person.age);\n        // \\uCF58\\uC194\\uC5D0\\uB294 25 \\uCC0D\\uD788\\uC9C0\\uB9CC \\uAC19\\uC740 \\uC8FC\\uC18C\\uB97C \\uCC38\\uC870\\uD574 \\uB9AC\\uB80C\\uB354\\uB9C1\\uC740 \\uC77C\\uC5B4\\uB098\\uC9C0 \\uC54A\\uB294\\uB2E4.\n      }}\n    >\n      25\\uC0B4\\uB85C \\uC80A\\uC5B4\\uC9C0\\uAC8C \\uD558\\uB294 \\uBC84\\uD2BC\n    </button>\n  </div>\n);\n`})}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.h5,{children:\"\\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uD0A8 \\uCF54\\uB4DC\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`const [person, setPerson] = useState({\n  name: 'duck',\n  age: 26,\n});\n\nreturn (\n  <div>\n    <span>{person.name}</span>\n    <span>{person.age}</span>\n    <button\n      onClick={() => {\n        setPerson((prev) => {\n          return { ...prev, age: 25 };\n          // \\uC2A4\\uD504\\uB808\\uB4DC \\uC5F0\\uC0B0\\uC790\\uB97C \\uC774\\uC6A9\\uD558\\uC5EC \\uBD88\\uBCC0\\uC131 \\uC720\\uC9C0\n        });\n      }}\n    >\n      25\\uC0B4\\uB85C \\uC80A\\uC5B4\\uC9C0\\uAC8C \\uD558\\uB294 \\uBC84\\uD2BC\n    </button>\n  </div>\n);\n`})}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.h3,{children:\"\\uB9AC\\uB355\\uC2A4\\uB97C \\uC0AC\\uC6A9\\uD574\\uBCF8 \\uC0AC\\uB78C\\uB4E4\\uC740 \\uC54C\\uACA0\\uC9C0\\uB9CC,\"}),`\n`,(0,e.jsx)(n.h3,{children:\"\\uB9AC\\uB355\\uC2A4\\uB97C \\uC774\\uC6A9\\uD558\\uC5EC \\uC0C1\\uD0DC\\uAD00\\uB9AC\\uB97C \\uD560 \\uB54C\\uB3C4 \\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uCF1C\\uC57C\\uD55C\\uB2E4.\"}),`\n`,(0,e.jsx)(n.h5,{children:\"\\uB9AC\\uB355\\uC2A4\\uC5D0\\uC11C \\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uD0A8 \\uCF54\\uB4DC\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`const initialState = {\n   name:'duck',\n   job:'front-dev',\n   age:null;\n}\n\nconst reducer = (state=initialState, action) =>{\n switch (action.type) {\n    case TEST:\n      return {\n        ...state, // \\uC2A4\\uD504\\uB808\\uB4DC \\uC5F0\\uC0B0\\uC790\\uB97C \\uC774\\uC6A9\\uD55C\\uB2E4.\n        age:action.data\n      };\n    default:\n      return state\n    }\n}\n`})}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.p,{children:`\\uD558\\uC9C0\\uB9CC \\uC704\\uC5D0\\uC11C \\uB9D0\\uD55C \\uAC83\\uCC98\\uB7FC \\uC2A4\\uD504\\uB808\\uB4DC \\uC5F0\\uC0B0\\uC790\\uB97C \\uC774\\uC6A9\\uD558\\uC5EC \\uBD88\\uBCC0\\uC131\\uC744 \\uC9C0\\uD0AC \\uB54C,\n\\uAC1D\\uCCB4\\uC758 \\uAE4A\\uC774\\uAC00 \\uBCF5\\uC7A1\\uD574\\uC9C0\\uBA74 \\uC5B4\\uB835\\uAE30 \\uB54C\\uBB38\\uC5D0, immer \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uC774\\uC6A9\\uD558\\uC790..!`})]})}function v(r={}){let{wrapper:n}=r.components||{};return n?(0,e.jsx)(n,Object.assign({},r,{children:(0,e.jsx)(h,r)})):h(r)}var O=v;return f(_);})();\n;return Component;"
  },
  "_id": "30.md",
  "_raw": {
    "sourceFilePath": "30.md",
    "sourceFileName": "30.md",
    "sourceFileDir": ".",
    "contentType": "markdown",
    "flattenedPath": "30"
  },
  "type": "Post"
}