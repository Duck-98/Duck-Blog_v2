{
  "title": "Next.js) window.is not defined 에러",
  "date": "2022-08-12",
  "description": "window.is not defined 에러",
  "tag": "에러해결",
  "body": {
    "raw": "\n## Next.js) window. is not defined 에러\n\nNext.js를 이용하여 개발을 하는 과정에서\nlocalStorage를 이용하여 데이터를 받아오려고 하는 와중에 window.is not defined라는 에러가 발생했다.\n\n### 에러 발생 이유\n\nNext.js는 서버사이드렌더링(SSR) 방식이다.\n서버사이드에서 먼저 실행된 후 클라이언트 사이드에서 실행이 되는데 우리가 사용하려는 window 객체는 서버사이드에는 존재하지 않고 클라이언트 사이드에 존재한다.\n\n그렇기에 리액트 내에서 사용하기 위해서는 componentDidMount내에서 코드가 실행되도록 작성해야한다.\n\n### 해결방법\n\n1. next/dynamic **[공식문서 링크](https://nextjs.org/docs/advanced-features/dynamic-import)**\n\n```js\nimport dynamic from 'next/dynamic';\n\nconst DynamicHeader = dynamic(() => import('../components/header'), {\n  loading: () => <p>Loading...</p>,\n});\n\nexport default function Home() {\n  return <DynamicHeader />;\n}\n```\n\n위와 같이 문제가 되는 컴포넌트를 사용할 때 해당 컴포넌트를 dynamic을 이용하여 클라이언트사이드렌더링(CSR)로 바꿔준다.\n\n2. useEffect\n   useEffect는 componentDidMount내에서 코드가 실행되기 때문에 서버에서 window 객체를 확인하지 않는다.\n\n예시)\n\n```js\nimport React, { useEffect, useState } from 'react';\n\nconst Example = () => {\n  useEffect(() => {\n    if (window.localStorage.getItem('token') === null) {\n      window.location.replace('/home');\n    }\n  }, []);\n};\n```\n\n3. typeof\n\n예시)\n\n```js\nconst [key, setKey] = useState(\n  typeof window !== 'undefined' ? window.localStorage.getItem(Key) || 0 : null,\n);\n```\n",
    "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),w=(t,n)=>{for(var o in n)c(t,o,{get:n[o],enumerable:!0})},r=(t,n,o,d)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let i of p(n))!u.call(t,i)&&i!==o&&c(t,i,{get:()=>n[i],enumerable:!(d=m(n,i))||d.enumerable});return t};var x=(t,n,o)=>(o=t!=null?h(f(t)):{},r(n||!t||!t.__esModule?c(o,\"default\",{value:t,enumerable:!0}):o,t)),j=t=>r(c({},\"__esModule\",{value:!0}),t);var l=g((E,a)=>{a.exports=_jsx_runtime});var N={};w(N,{default:()=>D,frontmatter:()=>y});var e=x(l()),y={title:\"Next.js) window.is not defined \\uC5D0\\uB7EC\",date:new Date(16602624e5),description:\"window.is not defined \\uC5D0\\uB7EC\",tag:\"\\uC5D0\\uB7EC\\uD574\\uACB0\"};function s(t){let n=Object.assign({h2:\"h2\",p:\"p\",h3:\"h3\",ol:\"ol\",li:\"li\",strong:\"strong\",a:\"a\",pre:\"pre\",code:\"code\"},t.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h2,{children:\"Next.js) window. is not defined \\uC5D0\\uB7EC\"}),`\n`,(0,e.jsx)(n.p,{children:`Next.js\\uB97C \\uC774\\uC6A9\\uD558\\uC5EC \\uAC1C\\uBC1C\\uC744 \\uD558\\uB294 \\uACFC\\uC815\\uC5D0\\uC11C\nlocalStorage\\uB97C \\uC774\\uC6A9\\uD558\\uC5EC \\uB370\\uC774\\uD130\\uB97C \\uBC1B\\uC544\\uC624\\uB824\\uACE0 \\uD558\\uB294 \\uC640\\uC911\\uC5D0 window.is not defined\\uB77C\\uB294 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD588\\uB2E4.`}),`\n`,(0,e.jsx)(n.h3,{children:\"\\uC5D0\\uB7EC \\uBC1C\\uC0DD \\uC774\\uC720\"}),`\n`,(0,e.jsx)(n.p,{children:`Next.js\\uB294 \\uC11C\\uBC84\\uC0AC\\uC774\\uB4DC\\uB80C\\uB354\\uB9C1(SSR) \\uBC29\\uC2DD\\uC774\\uB2E4.\n\\uC11C\\uBC84\\uC0AC\\uC774\\uB4DC\\uC5D0\\uC11C \\uBA3C\\uC800 \\uC2E4\\uD589\\uB41C \\uD6C4 \\uD074\\uB77C\\uC774\\uC5B8\\uD2B8 \\uC0AC\\uC774\\uB4DC\\uC5D0\\uC11C \\uC2E4\\uD589\\uC774 \\uB418\\uB294\\uB370 \\uC6B0\\uB9AC\\uAC00 \\uC0AC\\uC6A9\\uD558\\uB824\\uB294 window \\uAC1D\\uCCB4\\uB294 \\uC11C\\uBC84\\uC0AC\\uC774\\uB4DC\\uC5D0\\uB294 \\uC874\\uC7AC\\uD558\\uC9C0 \\uC54A\\uACE0 \\uD074\\uB77C\\uC774\\uC5B8\\uD2B8 \\uC0AC\\uC774\\uB4DC\\uC5D0 \\uC874\\uC7AC\\uD55C\\uB2E4.`}),`\n`,(0,e.jsx)(n.p,{children:\"\\uADF8\\uB807\\uAE30\\uC5D0 \\uB9AC\\uC561\\uD2B8 \\uB0B4\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 componentDidMount\\uB0B4\\uC5D0\\uC11C \\uCF54\\uB4DC\\uAC00 \\uC2E4\\uD589\\uB418\\uB3C4\\uB85D \\uC791\\uC131\\uD574\\uC57C\\uD55C\\uB2E4.\"}),`\n`,(0,e.jsx)(n.h3,{children:\"\\uD574\\uACB0\\uBC29\\uBC95\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"next/dynamic \",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/advanced-features/dynamic-import\",children:\"\\uACF5\\uC2DD\\uBB38\\uC11C \\uB9C1\\uD06C\"})})]}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`import dynamic from 'next/dynamic';\n\nconst DynamicHeader = dynamic(() => import('../components/header'), {\n  loading: () => <p>Loading...</p>,\n});\n\nexport default function Home() {\n  return <DynamicHeader />;\n}\n`})}),`\n`,(0,e.jsx)(n.p,{children:\"\\uC704\\uC640 \\uAC19\\uC774 \\uBB38\\uC81C\\uAC00 \\uB418\\uB294 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C \\uC0AC\\uC6A9\\uD560 \\uB54C \\uD574\\uB2F9 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C dynamic\\uC744 \\uC774\\uC6A9\\uD558\\uC5EC \\uD074\\uB77C\\uC774\\uC5B8\\uD2B8\\uC0AC\\uC774\\uB4DC\\uB80C\\uB354\\uB9C1(CSR)\\uB85C \\uBC14\\uAFD4\\uC900\\uB2E4.\"}),`\n`,(0,e.jsxs)(n.ol,{start:\"2\",children:[`\n`,(0,e.jsx)(n.li,{children:`useEffect\nuseEffect\\uB294 componentDidMount\\uB0B4\\uC5D0\\uC11C \\uCF54\\uB4DC\\uAC00 \\uC2E4\\uD589\\uB418\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC11C\\uBC84\\uC5D0\\uC11C window \\uAC1D\\uCCB4\\uB97C \\uD655\\uC778\\uD558\\uC9C0 \\uC54A\\uB294\\uB2E4.`}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\uC608\\uC2DC)\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`import React, { useEffect, useState } from 'react';\n\nconst Example = () => {\n  useEffect(() => {\n    if (window.localStorage.getItem('token') === null) {\n      window.location.replace('/home');\n    }\n  }, []);\n};\n`})}),`\n`,(0,e.jsxs)(n.ol,{start:\"3\",children:[`\n`,(0,e.jsx)(n.li,{children:\"typeof\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\uC608\\uC2DC)\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`const [key, setKey] = useState(\n  typeof window !== 'undefined' ? window.localStorage.getItem(Key) || 0 : null,\n);\n`})})]})}function S(t={}){let{wrapper:n}=t.components||{};return n?(0,e.jsx)(n,Object.assign({},t,{children:(0,e.jsx)(s,t)})):s(t)}var D=S;return j(N);})();\n;return Component;"
  },
  "_id": "6.mdx",
  "_raw": {
    "sourceFilePath": "6.mdx",
    "sourceFileName": "6.mdx",
    "sourceFileDir": ".",
    "contentType": "mdx",
    "flattenedPath": "6"
  },
  "type": "Post"
}